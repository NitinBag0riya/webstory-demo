{"version":3,"file":"chunk-getStoryMarkup.js","mappings":"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CAAoCkF,mBAAoB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0CL,yBAA0B;AACpE,4CAA4CD,yBAA0B;AACtE;AACA,+CAA+CD,SAAU,aAAYD,SAAU;AAC/E;AACA;AACA;AACA,WAlBU;AAmBA;AACV;AACA;AACA;AACA;AACW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+BF,eAAgB;AAC/C,iCAAiCA,eAAgB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+BC,eAAgB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnH+B,KAF3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF;AA0HD;;KAhJQF;AAkJT,iEAAeA,YAAf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASD,gBAAT,CAA0Ba,CAA1B,EAA6B;AAC3B,SAAO,2BAA2BC,IAA3B,CAAgCD,CAAhC,CAAP;AACD;;AAED,iEAAeb,gBAAf","sources":["webpack://web-story-creation-tool/./packages/fonts/src/constants.js","webpack://web-story-creation-tool/./packages/fonts/src/index.js","webpack://web-story-creation-tool/./packages/fonts/src/utils/getFontCSS.js","webpack://web-story-creation-tool/./packages/fonts/src/utils/getGoogleFontURL.js","webpack://web-story-creation-tool/./packages/fonts/src/utils/index.js","webpack://web-story-creation-tool/./packages/output/src/components/withLink/index.js","webpack://web-story-creation-tool/./packages/output/src/constants.js","webpack://web-story-creation-tool/./packages/output/src/element.js","webpack://web-story-creation-tool/./packages/output/src/index.js","webpack://web-story-creation-tool/./packages/output/src/page.js","webpack://web-story-creation-tool/./packages/output/src/story.js","webpack://web-story-creation-tool/./packages/output/src/utils/ampBoilerplate.js","webpack://web-story-creation-tool/./packages/output/src/utils/backgroundAudio.js","webpack://web-story-creation-tool/./packages/output/src/utils/fontDeclarations.js","webpack://web-story-creation-tool/./packages/output/src/utils/getAutoAdvanceAfter.js","webpack://web-story-creation-tool/./packages/output/src/utils/getLongestMediaElement.js","webpack://web-story-creation-tool/./packages/output/src/utils/getPreloadResources.js","webpack://web-story-creation-tool/./packages/output/src/utils/getStoryMarkup.js","webpack://web-story-creation-tool/./packages/output/src/utils/getTextElementTagNames.js","webpack://web-story-creation-tool/./packages/output/src/utils/getUsedAmpExtensions.js","webpack://web-story-creation-tool/./packages/output/src/utils/outlink.js","webpack://web-story-creation-tool/./packages/output/src/utils/shoppingAttachment.js","webpack://web-story-creation-tool/./packages/output/src/utils/styles.js","webpack://web-story-creation-tool/./packages/patterns/src/isHexColorString.js"],"sourcesContent":["/*\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n// Curated Fonts list source:\n// https://github.com/googleforcreators/web-stories-wp/issues/1989#issuecomment-662253222\nexport const CURATED_FONT_NAMES = [\n  'Karla',\n  'Lato',\n  'Lora',\n  'Merriweather',\n  'Montserrat',\n  'Nunito',\n  'Oswald',\n  'Playfair Display',\n  'Poppins',\n  'Raleway',\n  'Roboto',\n  'Roboto Condensed',\n  'Source Serif Pro',\n  'Titillium Web',\n  'Work Sans',\n  'Alegreya',\n  'Arimo',\n  'EB Garamond',\n  'IBM Plex Mono',\n  'IBM Plex Serif',\n  'Inconsolata',\n  'Mulish',\n  'Noto Sans',\n  'Noto Serif',\n  'Open Sans',\n  'PT Mono',\n  'PT Sans',\n  'PT Serif',\n  'Roboto Mono',\n  'Source Sans Pro',\n  'Ubuntu',\n  'Anton',\n  'BioRhyme',\n  'Bungee',\n  'Bungee Shade',\n  'Cookie',\n  'Dancing Script',\n  'Monoton',\n  'Nothing You Could Do',\n  'Parisienne',\n  'Rock Salt',\n  'UnifrakturMaguntia',\n];\n","/*\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport * from './constants';\nexport * from './utils';\n","/*\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Get the CSS font format for a given font URL.\n *\n * @param {string} src Font URL.\n * @return {string|null} Font format string or null if the font is unsupported.\n */\nfunction getFontFormat(src) {\n  const fileExtension = src.split(/[#?]/)[0].split('.').pop().trim();\n\n  switch (fileExtension) {\n    case 'woff':\n    case 'woff2':\n      return fileExtension;\n    case 'ttf':\n      return 'truetype';\n    case 'otf':\n      return 'opentype';\n    default:\n      return null;\n  }\n}\n\n/**\n * Get the inline stylesheet for a specific font family.\n *\n * @param {string} name Font family.\n * @param {string} src Font URL.\n * @return {string|null} Stylesheet or null if the font has an unsupported format.\n */\nfunction getFontCSS(name, src) {\n  const format = getFontFormat(src);\n\n  if (!format) {\n    return null;\n  }\n\n  return `@font-face {\n    font-family: \"${name}\";\n    src: url('${src}') format('${format}');\n    font-weight: normal;\n    font-display:swap;\n  }`;\n}\n\nexport default getFontCSS;\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Given a list of Google fonts, returns a URL to embed them.\n *\n * Uses the given list of font variants (axis tuples) to assemble the\n * axis tag list and axis tuple list that Google Fonts expects.\n *\n * @see https://developers.google.com/fonts/docs/css2\n * @param {Array<Object<{family: string, variants: Array<number, number>}>>} fonts List of font objects.\n * @param {string} [display] Valid font-display value, e.g. 'swap' or 'auto'. Default 'swap'.\n * @return {string} Google Fonts embed URL.\n */\nfunction getGoogleFontURL(fonts, display = 'swap') {\n  const url = new URL('https://fonts.googleapis.com/css2');\n  url.searchParams.append('display', display);\n\n  for (const { family: familyName, variants = [] } of fonts) {\n    // [ [ 1, 400 ], [ 0, 700 ] ] -> [ ital, wght ]\n    const axes = variants\n      .reduce((acc, [fontStyle, fontWeight]) => {\n        // Uses axis names as listed on https://developers.google.com/web/fundamentals/design-and-ux/typography/variable-fonts.\n        if (fontStyle === 1 && !acc.includes('ital')) {\n          acc.push('ital');\n        }\n        if (fontWeight && fontWeight !== 400 && !acc.includes('wght')) {\n          acc.push('wght');\n        }\n        return acc;\n      }, [])\n      .sort(); // Need to be sorted alphabetically.\n\n    let family = familyName;\n\n    const axisTagList = axes.join(',');\n\n    // [ ital, wght ] -> Roboto:ital,wght\n    if (axisTagList) {\n      family += ':' + axisTagList;\n    }\n\n    const axisTuples = variants\n      .sort((a, b) => {\n        if (a[0] < b[0]) {\n          return -1;\n        }\n\n        if (a[0] > b[0]) {\n          return 1;\n        }\n\n        return a[1] - b[1];\n      })\n      .map(([fontStyle, fontWeight]) => {\n        const tuple = [];\n        if (axes.includes('ital')) {\n          tuple.push(fontStyle);\n        }\n        if (axes.includes('wght')) {\n          tuple.push(fontWeight);\n        }\n        return tuple;\n      });\n\n    // [ [ 1, 400 ], [ 0, 700 ] ] -> 1,400;0,700\n    const axisTupleList = axisTuples.join(';');\n\n    const onlyRegularVariant = axisTupleList === '400';\n\n    if (axisTupleList && !onlyRegularVariant) {\n      family += '@' + axisTupleList;\n    }\n\n    url.searchParams.append('family', family);\n  }\n\n  return decodeURI(url.toString());\n}\n\nexport default getGoogleFontURL;\n","/*\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport { default as getFontCSS } from './getFontCSS';\nexport { default as getGoogleFontURL } from './getGoogleFontURL';\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * External dependencies\n */\nimport PropTypes from 'prop-types';\nimport { withProtocol } from '@googleforcreators/url';\nimport { StoryPropTypes } from '@googleforcreators/elements';\n\nfunction WithLink({ element, children, ...rest }) {\n  const link = element.link || {};\n  const { url, icon, desc, rel = [] } = link;\n  if (!url) {\n    return children;\n  }\n  rel.push('noreferrer');\n  const urlWithProtocol = withProtocol(url);\n  return (\n    // eslint-disable-next-line react/jsx-no-target-blank -- False positive\n    <a\n      href={urlWithProtocol}\n      data-tooltip-icon={icon || undefined}\n      data-tooltip-text={desc}\n      target=\"_blank\"\n      rel={rel.join(' ')}\n      {...rest}\n    >\n      {children}\n    </a>\n  );\n}\n\nWithLink.propTypes = {\n  element: StoryPropTypes.element.isRequired,\n  children: PropTypes.node.isRequired,\n};\n\nexport default WithLink;\n","/*\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nexport const DEFAULT_PAGE_DURATION = 7;\nexport const DEFAULT_AUTO_ADVANCE = true;\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * External dependencies\n */\nimport { generatePatternStyles } from '@googleforcreators/patterns';\nimport { getBox } from '@googleforcreators/units';\nimport { StoryAnimation } from '@googleforcreators/animation';\nimport {\n  BACKGROUND_TEXT_MODE,\n  getDefinitionForType,\n  StoryPropTypes,\n} from '@googleforcreators/elements';\nimport {\n  OutputWithMask as WithMask,\n  getBorderPositionCSS,\n  getBorderRadius,\n  getBorderStyle,\n  shouldDisplayBorder,\n} from '@googleforcreators/masks';\n\n/**\n * Internal dependencies\n */\nimport WithLink from './components/withLink';\n\nfunction OutputElement({ element }) {\n  const {\n    id,\n    opacity,\n    type,\n    border,\n    backgroundColor,\n    backgroundTextMode,\n    overlay,\n  } = element;\n  const { Output, isMaskable } = getDefinitionForType(type);\n\n  // Box is calculated based on the 100%:100% basis for width and height\n  const box = getBox(element, 100, 100);\n  const { x, y, width, height, rotationAngle } = box;\n\n  // We're adding background styles in case of Fill here so that\n  // the background and the border would match together.\n  const bgStyles = {\n    backgroundClip: 'content-box',\n    ...generatePatternStyles(backgroundColor),\n  };\n\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        pointerEvents: 'none',\n        left: x ? `${x}%` : 0,\n        top: y ? `${y}%` : 0,\n        width: `${width}%`,\n        height: `${height}%`,\n        ...(shouldDisplayBorder(element)\n          ? getBorderPositionCSS({\n              ...border,\n              width: `${width}%`,\n              height: `${height}%`,\n              posTop: `${y}%`,\n              posLeft: `${x}%`,\n            })\n          : null),\n        transform: rotationAngle ? `rotate(${rotationAngle}deg)` : null,\n        opacity: typeof opacity !== 'undefined' ? opacity / 100 : null,\n      }}\n    >\n      <StoryAnimation.AMPWrapper target={id}>\n        <WithMask\n          className={!isMaskable ? undefined : 'mask'}\n          element={element}\n          box={box}\n          id={'el-' + id}\n          style={{\n            ...(shouldDisplayBorder(element) ? getBorderStyle(element) : null),\n            pointerEvents: 'initial',\n            width: '100%',\n            height: '100%',\n            display: 'block',\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            zIndex: 0,\n            ...getBorderRadius(element),\n            ...(backgroundTextMode === BACKGROUND_TEXT_MODE.FILL\n              ? bgStyles\n              : null),\n          }}\n          skipDefaultMask\n        >\n          <WithLink\n            element={element}\n            style={{\n              width: '100%',\n              height: '100%',\n              display: 'block',\n              position: 'absolute',\n              top: 0,\n              left: 0,\n            }}\n          >\n            <Output element={element} box={box} />\n          </WithLink>\n          {overlay && (\n            <div\n              className=\"element-overlay-area\"\n              style={generatePatternStyles(overlay)}\n            />\n          )}\n        </WithMask>\n      </StoryAnimation.AMPWrapper>\n    </div>\n  );\n}\n\nOutputElement.propTypes = {\n  element: StoryPropTypes.element.isRequired,\n};\n\nexport default OutputElement;\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport { default as OutputStory } from './story';\nexport { default as getStoryMarkup } from './utils/getStoryMarkup';\nexport * from './constants';\nexport { default as getLongestMediaElement } from './utils/getLongestMediaElement';\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * External dependencies\n */\nimport PropTypes from 'prop-types';\nimport { generatePatternStyles } from '@googleforcreators/patterns';\nimport { PAGE_HEIGHT, PAGE_WIDTH } from '@googleforcreators/units';\nimport { StoryAnimation } from '@googleforcreators/animation';\nimport {\n  ELEMENT_TYPES,\n  StoryPropTypes,\n  isElementBelowLimit,\n} from '@googleforcreators/elements';\n\n/**\n * Internal dependencies\n */\nimport { DEFAULT_AUTO_ADVANCE, DEFAULT_PAGE_DURATION } from './constants';\nimport OutputElement from './element';\nimport BackgroundAudio from './utils/backgroundAudio';\nimport getTextElementTagNames from './utils/getTextElementTagNames';\nimport getAutoAdvanceAfter from './utils/getAutoAdvanceAfter';\nimport Outlink from './utils/outlink';\nimport ShoppingAttachment from './utils/shoppingAttachment';\n\nconst ASPECT_RATIO = `${PAGE_WIDTH}:${PAGE_HEIGHT}`;\n\nfunction OutputPage({\n  page,\n  autoAdvance = DEFAULT_AUTO_ADVANCE,\n  defaultPageDuration = DEFAULT_PAGE_DURATION,\n  flags,\n}) {\n  const {\n    id,\n    animations,\n    elements,\n    backgroundColor,\n    backgroundAudio,\n    pageAttachment,\n  } = page;\n\n  const [backgroundElement, ...otherElements] = elements;\n\n  // If the background element has base color set, it's media, use that.\n  const baseColor = backgroundElement?.resource?.baseColor;\n  const backgroundStyles = baseColor\n    ? { backgroundColor: baseColor }\n    : { backgroundColor: 'white', ...generatePatternStyles(backgroundColor) };\n\n  const autoAdvanceAfter = autoAdvance\n    ? getAutoAdvanceAfter({\n        animations,\n        elements,\n        defaultPageDuration,\n        backgroundAudio,\n        id,\n      })\n    : undefined;\n\n  const tagNamesMap = getTextElementTagNames(\n    otherElements.filter(({ type }) => 'text' === type)\n  );\n\n  const regularElements = otherElements.map((element) => {\n    const { id: elementId, type, tagName = 'auto' } = element;\n\n    if ('text' === type && 'auto' === tagName) {\n      element.tagName = tagNamesMap.get(elementId);\n    }\n\n    // Remove invalid links.\n    // TODO: this should come from the pre-publish checklist in the future.\n    if (pageAttachment?.url && isElementBelowLimit(element)) {\n      delete element.link;\n    }\n\n    return element;\n  });\n\n  const products = elements\n    .filter(({ type }) => type === ELEMENT_TYPES.PRODUCT)\n    .map(({ product }) => product)\n    .filter(Boolean);\n\n  const videoCaptions = elements\n    .filter(\n      ({ type, tracks }) => type === ELEMENT_TYPES.VIDEO && tracks?.length > 0\n    )\n    .map(({ id: videoId }) => `el-${videoId}-captions`);\n\n  const backgroundAudioSrc = backgroundAudio?.resource?.src;\n  const hasBackgroundAudioCaptions = backgroundAudio?.tracks?.length > 0;\n  const hasNonLoopingBackgroundAudio =\n    false === backgroundAudio?.loop && backgroundAudio?.resource?.length;\n  const needsEnhancedBackgroundAudio =\n    hasBackgroundAudioCaptions || hasNonLoopingBackgroundAudio;\n\n  if (backgroundAudioSrc && hasBackgroundAudioCaptions) {\n    videoCaptions.push(`el-${id}-captions`);\n  }\n\n  return (\n    <amp-story-page\n      id={id}\n      auto-advance-after={autoAdvanceAfter}\n      background-audio={\n        backgroundAudioSrc && !needsEnhancedBackgroundAudio\n          ? backgroundAudioSrc\n          : undefined\n      }\n    >\n      <StoryAnimation.Provider animations={animations} elements={elements}>\n        <StoryAnimation.AMPAnimations />\n\n        {backgroundElement && (\n          <amp-story-grid-layer\n            template=\"vertical\"\n            aspect-ratio={ASPECT_RATIO}\n            class=\"grid-layer\"\n          >\n            <div className=\"page-fullbleed-area\" style={backgroundStyles}>\n              <div className=\"page-safe-area\">\n                <OutputElement element={backgroundElement} />\n                {backgroundElement.overlay && (\n                  <div\n                    className=\"page-background-overlay-area\"\n                    style={generatePatternStyles(backgroundElement.overlay)}\n                  />\n                )}\n              </div>\n            </div>\n          </amp-story-grid-layer>\n        )}\n\n        <amp-story-grid-layer\n          template=\"vertical\"\n          aspect-ratio={ASPECT_RATIO}\n          class=\"grid-layer\"\n        >\n          <div className=\"page-fullbleed-area\">\n            <div className=\"page-safe-area\">\n              {regularElements.map((element) => (\n                <OutputElement key={element.id} element={element} />\n              ))}\n            </div>\n          </div>\n        </amp-story-grid-layer>\n      </StoryAnimation.Provider>\n\n      {backgroundAudioSrc && needsEnhancedBackgroundAudio && (\n        <BackgroundAudio backgroundAudio={backgroundAudio} id={id} />\n      )}\n\n      {videoCaptions.length > 0 && (\n        <amp-story-grid-layer\n          template=\"vertical\"\n          aspect-ratio={ASPECT_RATIO}\n          class=\"grid-layer align-bottom\"\n        >\n          <div className=\"captions-area\">\n            {videoCaptions.map((captionId) => (\n              <amp-story-captions\n                key={captionId}\n                id={captionId}\n                layout=\"fixed-height\"\n                height=\"100\"\n              />\n            ))}\n          </div>\n        </amp-story-grid-layer>\n      )}\n\n      {/* <amp-story-page-outlink> needs to be the last child element */}\n      {pageAttachment?.url && <Outlink {...pageAttachment} />}\n      {products.length > 0 && flags?.shoppingIntegration && (\n        <ShoppingAttachment products={products} theme={pageAttachment?.theme} />\n      )}\n    </amp-story-page>\n  );\n}\n\nOutputPage.propTypes = {\n  page: StoryPropTypes.page.isRequired,\n  autoAdvance: PropTypes.bool,\n  defaultPageDuration: PropTypes.number,\n  flags: PropTypes.object,\n};\n\nexport default OutputPage;\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * External dependencies\n */\nimport PropTypes from 'prop-types';\nimport {\n  BackgroundAudioPropType,\n  StoryPropTypes,\n} from '@googleforcreators/elements';\n\n/**\n * Internal dependencies\n */\nimport getUsedAmpExtensions from './utils/getUsedAmpExtensions';\nimport Boilerplate from './utils/ampBoilerplate';\nimport CustomCSS from './utils/styles';\nimport FontDeclarations from './utils/fontDeclarations';\nimport OutputPage from './page';\nimport getPreloadResources from './utils/getPreloadResources';\n\nfunction OutputStory({\n  story: {\n    featuredMedia,\n    link,\n    title,\n    autoAdvance,\n    defaultPageDuration,\n    backgroundAudio,\n    publisherLogo,\n  },\n  pages,\n  metadata: { publisher },\n  flags,\n}) {\n  const ampExtensions = getUsedAmpExtensions(pages);\n  const preloadResources = getPreloadResources(pages);\n\n  const featuredMediaUrl = featuredMedia?.url || '';\n  const publisherLogoUrl = publisherLogo?.url || '';\n\n  return (\n    <html amp=\"\" lang=\"en\">\n      <head>\n        <meta charSet=\"utf-8\" />\n        <meta\n          name=\"viewport\"\n          content=\"width=device-width,minimum-scale=1,initial-scale=1\"\n        />\n        {ampExtensions.map(({ name, src }) => (\n          <script key={src} async=\"async\" src={src} custom-element={name} />\n        ))}\n        <FontDeclarations pages={pages} />\n        {preloadResources.map(({ url, type }) => (\n          <link key={url} href={url} rel=\"preload\" as={type} />\n        ))}\n        <Boilerplate />\n        <CustomCSS />\n        {/* Everything between these markers can be replaced server-side. */}\n        <meta name=\"web-stories-replace-head-start\" />\n        <title>{title}</title>\n        {link && <link rel=\"canonical\" href={link} />}\n        <meta name=\"web-stories-replace-head-end\" />\n      </head>\n      <body>\n        <amp-story\n          standalone=\"\"\n          publisher={publisher}\n          publisher-logo-src={publisherLogoUrl}\n          title={title}\n          poster-portrait-src={featuredMediaUrl}\n          background-audio={backgroundAudio?.resource?.src ?? undefined}\n        >\n          {pages.map((page) => (\n            <OutputPage\n              key={page.id}\n              page={page}\n              autoAdvance={autoAdvance}\n              defaultPageDuration={defaultPageDuration}\n              flags={flags}\n            />\n          ))}\n        </amp-story>\n      </body>\n    </html>\n  );\n}\n\nOutputStory.propTypes = {\n  story: PropTypes.shape({\n    link: PropTypes.string,\n    title: PropTypes.string.isRequired,\n    autoAdvance: PropTypes.bool,\n    defaultPageDuration: PropTypes.number,\n    backgroundAudio: PropTypes.shape({\n      resource: BackgroundAudioPropType,\n    }),\n    publisherLogo: PropTypes.shape({\n      url: PropTypes.string.isRequired,\n    }),\n    featuredMedia: PropTypes.shape({\n      url: PropTypes.string.isRequired,\n    }),\n  }).isRequired,\n  pages: PropTypes.arrayOf(StoryPropTypes.page).isRequired,\n  metadata: PropTypes.shape({\n    publisher: PropTypes.string.isRequired,\n  }).isRequired,\n  flags: PropTypes.object,\n};\n\nexport default OutputStory;\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * Renders AMP boilerplate\n *\n * @see https://amp.dev/documentation/guides-and-tutorials/learn/spec/amp-boilerplate/\n * @see https://amp.dev/documentation/components/amp-story/#boilerplate\n * @return {Element} AMP boilerplate.\n */\nfunction Boilerplate() {\n  return (\n    <>\n      <style\n        amp-boilerplate=\"\"\n        dangerouslySetInnerHTML={{\n          __html:\n            'body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}',\n        }}\n      />\n      <noscript>\n        <style\n          amp-boilerplate=\"\"\n          dangerouslySetInnerHTML={{\n            __html:\n              'body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}',\n          }}\n        />\n      </noscript>\n    </>\n  );\n}\n\nexport default Boilerplate;\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * External dependencies\n */\nimport PropTypes from 'prop-types';\nimport { ResourcePropTypes } from '@googleforcreators/media';\nimport { BackgroundAudioPropType } from '@googleforcreators/elements';\n\nfunction BackgroundAudio({ backgroundAudio, id }) {\n  const { resource, tracks, loop } = backgroundAudio || {};\n  const { mimeType, src } = resource;\n\n  const videoProps = {\n    loop: loop ? 'loop' : undefined,\n    id: `page-${id}-background-audio`,\n    // Actual <amp-story-captions> output happens in OutputPage.\n    'captions-id': tracks?.length > 0 ? `el-${id}-captions` : undefined,\n  };\n\n  const sourceProps = {\n    type: mimeType,\n    src,\n  };\n\n  return (\n    <amp-story-grid-layer template=\"fill\">\n      <amp-video\n        autoPlay=\"autoplay\"\n        layout=\"nodisplay\"\n        poster=\"\"\n        {...videoProps}\n      >\n        <source {...sourceProps} />\n        {tracks &&\n          tracks.map(({ srclang, label, kind, track, id: key }, i) => (\n            <track\n              srcLang={srclang}\n              label={label}\n              kind={kind}\n              src={track}\n              key={key}\n              default={i === 0}\n            />\n          ))}\n      </amp-video>\n    </amp-story-grid-layer>\n  );\n}\n\nBackgroundAudio.propTypes = {\n  backgroundAudio: PropTypes.shape({\n    resource: BackgroundAudioPropType,\n    loop: PropTypes.bool,\n    tracks: PropTypes.arrayOf(ResourcePropTypes.trackResource),\n  }),\n  id: PropTypes.string.isRequired,\n};\n\nexport default BackgroundAudio;\n","/*\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * External dependencies\n */\nimport PropTypes from 'prop-types';\nimport { getGoogleFontURL, getFontCSS } from '@googleforcreators/fonts';\nimport { getFontVariants } from '@googleforcreators/rich-text';\nimport { StoryPropTypes } from '@googleforcreators/elements';\n\nconst hasTuple = (tuples, tuple) =>\n  tuples.some((val) => val[0] === tuple[0] && val[1] === tuple[1]);\n\nconst tupleDiff = (a, b) => {\n  return Math.abs(a[0] + a[1] - b[0] - b[1]);\n};\n\nconst getNearestTuple = (tuples, tuple) => {\n  return tuples.reduce((acc, curr) => {\n    const currDiff = tupleDiff(curr, tuple);\n    const accDiff = tupleDiff(acc, tuple);\n\n    return currDiff < accDiff ? curr : acc;\n  });\n};\n\nfunction FontDeclarations({ pages }) {\n  const map = new Map();\n\n  for (const { elements } of pages) {\n    const textElements = elements.filter(({ type }) => type === 'text');\n    // Prepare font objects for later use.\n    for (const { font, content } of textElements) {\n      const { service, family, variants = [], url } = font;\n      if (!service || service === 'system') {\n        continue;\n      }\n\n      const serviceMap = map.get(service) || new Map();\n      map.set(service, serviceMap);\n\n      const fontObj = serviceMap.get(family) || { family, variants: [], url };\n\n      const contentVariants = getFontVariants(content);\n\n      if (variants.length > 0) {\n        // A variant (\"axis tuple\" in Google Fonts terms) is a combination\n        // of font style and weight for a given font.\n        // The first item is a flag for italic.\n        // The second item is the numeric font weight.\n        // Example: [1, 700] for italic + bold\n        for (const variant of contentVariants) {\n          // Use closest variant as fallback and let browser do the math if needed.\n          // Examples:\n          // - If only [ [ 0, 200 ], [ 0, 400 ] ] exist, and\n          //   [ 1, 200] was requested, fall back to [ 0, 200 ].\n          // - If only [ [ 0, 400 ], [ 0, 800 ] ] exist, and\n          //   [ 1, 800] was requested, fall back to [ 0, 800 ].\n          // - If only [ [ 1, 400 ] ] exist, and\n          //   [ 0, 400] was requested, fall back to [ 1, 400 ].\n\n          const newVariant = getNearestTuple(variants, variant);\n          const fontObjHasVariant = hasTuple(fontObj.variants, newVariant);\n          const isValidVariant = hasTuple(variants, newVariant);\n\n          // Keeps list unique.\n          if (!fontObjHasVariant && isValidVariant) {\n            fontObj.variants.push(newVariant);\n          }\n        }\n      }\n\n      serviceMap.set(family, fontObj);\n    }\n  }\n\n  return (\n    <>\n      {Array.from(map.keys()).map((service) => {\n        const serviceMap = map.get(service);\n        switch (service) {\n          case 'fonts.google.com':\n            return (\n              <link\n                key={service}\n                href={getGoogleFontURL(Array.from(serviceMap.values()))}\n                rel=\"stylesheet\"\n              />\n            );\n          case 'custom':\n            return Array.from(serviceMap.values()).map(({ family, url }) => {\n              const inlineStyle = getFontCSS(family, url);\n              return (\n                <style\n                  key={family}\n                  dangerouslySetInnerHTML={{\n                    __html: inlineStyle,\n                  }}\n                />\n              );\n            });\n          default:\n            return null;\n        }\n      })}\n    </>\n  );\n}\n\nFontDeclarations.propTypes = {\n  pages: PropTypes.arrayOf(StoryPropTypes.page).isRequired,\n};\n\nexport default FontDeclarations;\n","/*\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * External dependencies\n */\nimport { getTotalDuration } from '@googleforcreators/animation';\n\n/**\n * Internal dependencies\n */\nimport { DEFAULT_PAGE_DURATION } from '../constants';\nimport getLongestMediaElement from './getLongestMediaElement';\n\nfunction getAutoAdvanceAfter({\n  animations,\n  defaultPageDuration = DEFAULT_PAGE_DURATION,\n  elements,\n  backgroundAudio,\n  id,\n}) {\n  const { resource, loop } = backgroundAudio || {};\n\n  const animationDuration = getTotalDuration({ animations }) / 1000;\n  const backgroundAudioDuration =\n    !loop && resource?.length ? resource.length : 0;\n\n  // If we have media, take the media time for advancement time and ignore the default,\n  // but still consider animation time as the minimum, too.\n  const longestMediaElement = getLongestMediaElement(\n    elements,\n    Math.max(animationDuration || 1, backgroundAudioDuration)\n  );\n  if (longestMediaElement?.id) {\n    return `el-${longestMediaElement?.id}-media`;\n  }\n\n  // If the page doesn't have media, take either the animations time or the configured default duration time.\n  const nonMediaPageDuration = Math.max(\n    animationDuration || 0,\n    backgroundAudioDuration,\n    defaultPageDuration\n  );\n  return nonMediaPageDuration > backgroundAudioDuration\n    ? `${nonMediaPageDuration}s`\n    : `page-${id}-background-audio`;\n}\n\nexport default getAutoAdvanceAfter;\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * External dependencies\n */\nimport { getDefinitionForType } from '@googleforcreators/elements';\n\n/**\n * Among all elements, returns the media element with the longest duration.\n *\n * @param {Array<Object>} elements List of elements.\n * @param {number} minDuration Duration that the minimum element must exceed in seconds.\n * @return {Object|undefined} Found element, or undefined if there are no media elements.\n */\nfunction getLongestMediaElement(elements, minDuration = 0) {\n  return elements\n    .filter(({ type, loop }) => {\n      const { isMedia } = getDefinitionForType(type);\n      // Ensure looping media is not considered.\n      return isMedia && !loop;\n    })\n    .reduce((longest, element) => {\n      if (!element?.resource?.length) {\n        return longest;\n      }\n\n      if (element?.resource?.length < minDuration) {\n        return longest;\n      }\n\n      return longest?.resource?.length > element?.resource?.length\n        ? longest\n        : element;\n    }, undefined);\n}\n\nexport default getLongestMediaElement;\n","/*\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * AMP Extension\n *\n * @typedef {Object} PreloadResource\n * @property {string} url The URL to the resource.\n * @property {string} type Type of resource, e.g. \"video\" or \"image\".\n */\n\n/**\n * Goes through all pages in a story to find the resources that should be preloaded.\n *\n * Currently this includes the first page's background image/video.\n *\n * @param {Array} pages List of pages.\n * @return {Array<PreloadResource>} List of preload resources.\n */\nfunction getPreloadResources(pages) {\n  const preloadResources = [];\n\n  if (pages.length === 0) {\n    return preloadResources;\n  }\n\n  for (const { type, resource, isBackground } of pages[0].elements) {\n    if (!['image', 'video', 'gif'].includes(type)) {\n      continue;\n    }\n\n    if (!isBackground) {\n      continue;\n    }\n\n    // resource?.output?.src is used only for GIF resources.\n    const src = resource?.output?.src || resource.src;\n\n    preloadResources.push({\n      url: src,\n      type: 'image' === type ? 'image' : 'video',\n    });\n  }\n\n  return preloadResources;\n}\n\nexport default getPreloadResources;\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * External dependencies\n */\nimport { renderToStaticMarkup } from '@googleforcreators/react';\n\n/**\n * Internal dependencies\n */\nimport OutputStory from '../story';\n\n/**\n * Creates AMP HTML markup for saving to DB for rendering in the FE.\n *\n * @param {import('../../../types').Story} story Story object.\n * @param {Array<Object>} pages List of pages.\n * @param {Object} metadata Metadata.\n * @param {Object} flags Feature flags.\n * @return {string} Story markup.\n */\nexport default function getStoryMarkup(story, pages, metadata, flags = {}) {\n  // Note that react-dom/server will warn about useLayoutEffect usage here.\n  // Not because of any wrongdoing in our code, but mostly because\n  // of its own profiler.\n  // See https://github.com/facebook/react/issues/14927\n  return renderToStaticMarkup(\n    <OutputStory\n      story={story}\n      pages={pages}\n      metadata={metadata}\n      flags={flags}\n    />\n  );\n}\n","/*\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst MINIMUM_CONTENT_LENGTH = 3;\n\n/**\n * Returns a map of tag names for text elements.\n *\n * Uses a very simple algorithm to set tag name (h1, h2, h3, p)\n * based on font size.\n *\n * @param {Array<Object>} elements List of text elements\n * @return {Map<string, string>} Map of element IDs to tag name.\n */\nfunction getTextElementTagNames(elements) {\n  return elements\n    .sort((a, b) => a.y - b.y)\n    .reduce(\n      /**\n       * Reducer.\n       *\n       * @param {Map<string, string>} tagNamesMap Tag names map.\n       * @param {Object} element Text element.\n       * @param {string} element.id Element ID\n       * @param {number} element.fontSize Font size.\n       * @param {string} element.content Text content.\n       * @return {Map<string, string>} Tag names map.\n       */\n      (tagNamesMap, { id, fontSize, content }) => {\n        if (content.length <= MINIMUM_CONTENT_LENGTH) {\n          tagNamesMap.set(id, 'p');\n          return tagNamesMap;\n        }\n\n        const hasH1 = Array.from(tagNamesMap.values()).includes('h1');\n\n        if (fontSize >= 36 && !hasH1) {\n          tagNamesMap.set(id, 'h1');\n          return tagNamesMap;\n        }\n\n        if (fontSize >= 27) {\n          tagNamesMap.set(id, 'h2');\n        } else if (fontSize >= 21) {\n          tagNamesMap.set(id, 'h3');\n        } else {\n          tagNamesMap.set(id, 'p');\n        }\n\n        return tagNamesMap;\n      },\n      new Map()\n    );\n}\n\nexport default getTextElementTagNames;\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * AMP Extension\n *\n * @typedef {Extension} Extension\n * @property {string} src The URL to the extension.\n * @property {?string} name The extension's name. Used for the custom-element attribute.\n */\n\n/**\n * Goes through all pages in a story to find the needed AMP extensions for them.\n *\n * Always includes the runtime as well as the amp-story extension.\n *\n * @param {Array} pages List of pages.\n * @return {Array<Extension>} List of used AMP extensions.\n */\nconst getUsedAmpExtensions = (pages) => {\n  const extensions = [\n    // runtime.\n    { src: 'https://cdn.ampproject.org/v0.js' },\n    {\n      name: 'amp-story',\n      src: 'https://cdn.ampproject.org/v0/amp-story-1.0.js',\n    },\n  ];\n\n  const ampVideo = {\n    name: 'amp-video',\n    src: 'https://cdn.ampproject.org/v0/amp-video-0.1.js',\n  };\n\n  const ampStoryCaptions = {\n    name: 'amp-story-captions',\n    src: 'https://cdn.ampproject.org/v0/amp-story-captions-0.1.js',\n  };\n\n  const ampStoryShopping = {\n    name: 'amp-story-shopping',\n    src: 'https://cdn.ampproject.org/v0/amp-story-shopping-0.1.js',\n  };\n\n  for (const { elements, backgroundAudio } of pages) {\n    if (backgroundAudio?.resource?.src && backgroundAudio?.tracks?.length > 0) {\n      extensions.push(ampVideo);\n      extensions.push(ampStoryCaptions);\n    }\n    for (const { type, tracks } of elements) {\n      switch (type) {\n        case 'video':\n          extensions.push(ampVideo);\n          if (tracks?.length > 0) {\n            extensions.push(ampStoryCaptions);\n          }\n          break;\n        case 'gif':\n          extensions.push(ampVideo);\n          break;\n        case 'product':\n          extensions.push(ampStoryShopping);\n          break;\n        default:\n          break;\n      }\n    }\n  }\n\n  return [...new Set(extensions)];\n};\n\nexport default getUsedAmpExtensions;\n","/*\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * External dependencies\n */\nimport PropTypes from 'prop-types';\nimport { __ } from '@googleforcreators/i18n';\n\nfunction Outlink({ ctaText, url, icon, theme, rel = [] }) {\n  return (\n    <amp-story-page-outlink\n      layout=\"nodisplay\"\n      cta-image={icon || undefined}\n      theme={theme}\n    >\n      <a href={url} rel={rel.join(' ')}>\n        {ctaText || __('Learn more', 'web-stories')}\n      </a>\n    </amp-story-page-outlink>\n  );\n}\n\nOutlink.propTypes = {\n  icon: PropTypes.string,\n  theme: PropTypes.oneOf(['light', 'dark']),\n  url: PropTypes.string,\n  rel: PropTypes.arrayOf(PropTypes.string),\n  ctaText: PropTypes.string,\n};\n\nexport default Outlink;\n","/*\n * Copyright 2022 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * External dependencies\n */\nimport PropTypes from 'prop-types';\n\nfunction ShoppingAttachment({ products, theme }) {\n  return (\n    <amp-story-shopping-attachment theme={theme}>\n      <script\n        type=\"application/json\"\n        dangerouslySetInnerHTML={{\n          __html: JSON.stringify({\n            items: products,\n          }),\n        }}\n      />\n    </amp-story-shopping-attachment>\n  );\n}\n\nShoppingAttachment.propTypes = {\n  theme: PropTypes.oneOf(['light', 'dark']),\n  products: PropTypes.arrayOf(PropTypes.object),\n};\n\nexport default ShoppingAttachment;\n","/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * External dependencies\n */\nimport { FULLBLEED_RATIO, PAGE_RATIO } from '@googleforcreators/units';\nimport { theme } from '@googleforcreators/design-system';\nimport { isHexColorString } from '@googleforcreators/patterns';\n\nfunction CustomStyles() {\n  const safeToFullRatio = PAGE_RATIO / FULLBLEED_RATIO;\n  const fullToSafeRatio = 1 / safeToFullRatio;\n  const safeRatio = PAGE_RATIO;\n  const fullRatio = FULLBLEED_RATIO;\n\n  // Make the story content aligned with top of viewport between aspect ratios\n  // 320:678 and 9:16. This ensures that the story's system UI (progress bar,\n  // share button) is either completely overlapping or not overlapping the story\n  // content (i.e. never partially overlapping). The icon height is 48px. Based\n  // on research, the smallest screen size in active use is 320 pixels wide. In\n  // this case, the minimum screen width that this ratio will work for it 320px.\n  const gridLayerExpandLowerBound = '320 / 678';\n  const gridLayerExpandUpperBound = '9 / 16';\n\n  // Match page background color to the workspace background color.\n  // Validate since we're using dangerouslySetInnerHTML with imported variable.\n  const workspaceColor = theme.colors.bg.primary;\n  const pageBackgroundColor = isHexColorString(workspaceColor)\n    ? workspaceColor\n    : '#1B1D1C';\n\n  return (\n    <style\n      amp-custom=\"\"\n      dangerouslySetInnerHTML={{\n        __html:\n          `\n              h1, h2, h3 { font-weight: normal; }\n\n              amp-story-page {\n                background-color: ${pageBackgroundColor};\n              }\n\n              amp-story-grid-layer {\n                overflow: visible;\n              }\n\n              @media (max-aspect-ratio: ${gridLayerExpandUpperBound})  {\n                @media (min-aspect-ratio: ${gridLayerExpandLowerBound}) {\n                  amp-story-grid-layer.grid-layer {\n                    margin-top: calc((100% / ${fullRatio} - 100% / ${safeRatio}) / 2);\n                  }\n                }\n              }\n          ` +\n          /*\n            The following rule is for Safari only.\n            In Safari, the font size is rounded up, causing overflow, this hack undoes this.\n            See https://github.com/googleforcreators/web-stories-wp/issues/6323\n           */\n          `\n              @media not all and (min-resolution:.001dpcm) {\n                @media {\n                  p.text-wrapper > span {\n                    font-size: calc(100% - 0.5px);\n                  }\n                }\n              }\n\n              .page-fullbleed-area,\n              .page-background-overlay-area {\n                position: absolute;\n                overflow: hidden;\n                width: 100%;\n                left: 0;\n                height: calc(${safeToFullRatio} * 100%);\n                top: calc((1 - ${safeToFullRatio}) * 100% / 2);\n              }\n\n              .element-overlay-area {\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n              }\n\n              .page-safe-area {\n                overflow: visible;\n                position: absolute;\n                top: 0;\n                bottom: 0;\n                left: 0;\n                right: 0;\n                width: 100%;\n                height: calc(${fullToSafeRatio} * 100%);\n                margin: auto 0;\n              }\n\n              .mask {\n                position: absolute;\n                overflow: hidden;\n              }\n\n              .fill {\n                position: absolute;\n                top: 0;\n                left: 0;\n                right: 0;\n                bottom: 0;\n                margin: 0;\n              }\n\n              @media (prefers-reduced-motion: no-preference) {\n                .animation-wrapper {\n                  opacity: var(--initial-opacity);\n                  transform: var(--initial-transform);\n                }\n              }\n\n              amp-story-grid-layer.align-bottom {\n                align-content: end;\n                padding: 0;\n              }\n\n              .captions-area {\n                padding: 0 32px 0;\n              }\n\n              amp-story-captions {\n                margin-bottom: 16px;\n                text-align: center;\n              }\n\n              amp-story-captions span {\n                display: inline-block;\n                margin: 0;\n                padding: 6px 12px;\n                vertical-align: middle;\n                border-radius: 15px;\n                background: rgba(11, 11, 11, 0.6);\n                color: rgba(255, 255, 255, 1);\n                font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif;;\n                font-size: calc(4 * var(--story-page-vw));\n                line-height: 1.4;\n                word-break: break-word;\n                word-wrap: break-word;\n                overflow-wrap: break-word;\n              }\n              `,\n      }}\n    />\n  );\n}\n\nexport default CustomStyles;\n","/*\n * Copyright 2021 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nfunction isHexColorString(s) {\n  return /^#(?:[a-f0-9]{3}){1,2}$/i.test(s);\n}\n\nexport default isHexColorString;\n"],"names":["CURATED_FONT_NAMES","getFontFormat","src","fileExtension","split","pop","trim","getFontCSS","name","format","getGoogleFontURL","fonts","display","url","URL","searchParams","append","family","familyName","variants","axes","reduce","acc","fontStyle","fontWeight","includes","push","sort","axisTagList","join","axisTuples","a","b","map","tuple","axisTupleList","onlyRegularVariant","decodeURI","toString","default","PropTypes","withProtocol","StoryPropTypes","WithLink","element","children","rest","link","icon","desc","rel","urlWithProtocol","undefined","propTypes","isRequired","node","DEFAULT_PAGE_DURATION","DEFAULT_AUTO_ADVANCE","generatePatternStyles","getBox","StoryAnimation","BACKGROUND_TEXT_MODE","getDefinitionForType","OutputWithMask","WithMask","getBorderPositionCSS","getBorderRadius","getBorderStyle","shouldDisplayBorder","OutputElement","id","opacity","type","border","backgroundColor","backgroundTextMode","overlay","Output","isMaskable","box","x","y","width","height","rotationAngle","bgStyles","backgroundClip","position","pointerEvents","left","top","posTop","posLeft","transform","zIndex","FILL","OutputStory","getStoryMarkup","getLongestMediaElement","PAGE_HEIGHT","PAGE_WIDTH","ELEMENT_TYPES","isElementBelowLimit","BackgroundAudio","getTextElementTagNames","getAutoAdvanceAfter","Outlink","ShoppingAttachment","ASPECT_RATIO","OutputPage","page","autoAdvance","defaultPageDuration","flags","animations","elements","backgroundAudio","pageAttachment","backgroundElement","otherElements","baseColor","resource","backgroundStyles","autoAdvanceAfter","tagNamesMap","filter","regularElements","elementId","tagName","get","products","PRODUCT","product","Boolean","videoCaptions","tracks","VIDEO","length","videoId","backgroundAudioSrc","hasBackgroundAudioCaptions","hasNonLoopingBackgroundAudio","loop","needsEnhancedBackgroundAudio","captionId","shoppingIntegration","theme","bool","number","object","BackgroundAudioPropType","getUsedAmpExtensions","Boilerplate","CustomCSS","FontDeclarations","getPreloadResources","story","featuredMedia","title","publisherLogo","pages","metadata","publisher","ampExtensions","preloadResources","featuredMediaUrl","publisherLogoUrl","shape","string","arrayOf","__html","ResourcePropTypes","mimeType","videoProps","sourceProps","i","srclang","label","kind","track","key","trackResource","getFontVariants","hasTuple","tuples","some","val","tupleDiff","Math","abs","getNearestTuple","curr","currDiff","accDiff","Map","textElements","font","content","service","serviceMap","set","fontObj","contentVariants","variant","newVariant","fontObjHasVariant","isValidVariant","Array","from","keys","values","inlineStyle","getTotalDuration","animationDuration","backgroundAudioDuration","longestMediaElement","max","nonMediaPageDuration","minDuration","isMedia","longest","isBackground","output","renderToStaticMarkup","MINIMUM_CONTENT_LENGTH","fontSize","hasH1","extensions","ampVideo","ampStoryCaptions","ampStoryShopping","Set","__","ctaText","oneOf","JSON","stringify","items","FULLBLEED_RATIO","PAGE_RATIO","isHexColorString","CustomStyles","safeToFullRatio","fullToSafeRatio","safeRatio","fullRatio","gridLayerExpandLowerBound","gridLayerExpandUpperBound","workspaceColor","colors","bg","primary","pageBackgroundColor","s","test"],"sourceRoot":""}